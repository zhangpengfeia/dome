### 1- 项目介绍

```markdown
- 黑马头条项目是一款使用vue.js技术,基于PC端的一款后台管理系统,主要有登录模块,首页信息展示模块,文章管理模块等
```

### 2- 采用技术

```markdown
- Vue.js
- Vue-cli
- Vue-Router
- Vue-cropper
- Axios.js
- Element-ui
- Git
- Es6部分新语法
```

### 3- 功能模块话述

- **3-1:登录模块**

- 项目话述: 

  1. 使用element-ui的form组件结合less完成login页面的整体布局。

  2. 定义form组件的自定义表单验证规则，验证用户和密码的范围。

     ```js
     1.表单验证的触发条件是用户获取焦点时才触发，但是如果不触发这个事件直接去点击登录，那么就不会触发表单验证。
     	++ 使用validate(callback)方法对整个表单校验，它的参数是一个回调函数，有两个参数：是否校验成功，未通过校验的字段，当都为true时在执行下一步
     ```

  3. 封装全局的axios，通过__axios.create自定义实例__配置全局地址baseURL，避免每次请求时频繁添加路径，封装**token**的，存读清操作。

  4. 通过表单验证后调用封装好的登录用户接口，成功则存**token**并跳转页面,失败则提示登录失败。

  5. 设置axios请求__拦截器__,在每次请求时获取本地__token__,加在请求头中。

  6. 在router.js处通过__router.beforeEach__设置全局的__导航守卫__,判断除了登录页外，本地是否有__token__,没有的话跳转到登录页面

  ```mermaid
  graph TD
  A[1.输入用户名密码] --> B{2.表单验证}
  B --> |通过| C[调用接口]
  B --> |未通过| D[提示]
  C --> |成功| E[存token,跳转页面]
  C --> |失败| F[提示]
  ```

  ```mermaid
  
  graph TD
  A[访问系统主页] -->B{导航守卫}
  B --> |无token|C[跳转到登录]
  B --> |有token|D[next]
  
  ```

  

- 遇到的问题:
  
  - 有价值的坑,需要准备几个问题,Error信息,如何解决的?统计几个具有代表性的
  
- **3-2: 首页模块**

  - 项目话述:

    1. 使用element-ui的Container布局容器布局整体架构，NavMenu布局侧边导航栏，设置页头右侧为用户信息，左侧为图标来控制左侧导航栏的收缩。

    2. 配置好所有模块的路由，通过__:default-active__属性设置高亮,在data中存放一个路径数据,__watch局部监听路由__，每次路由路径改变时都改变data中的数据。

    3. 通过控制<el-menu>中的__:collapse__属性实现导航的伸缩，在data中声明一个数据用来存放导航栏的状态，点击时取反。

       ```js
       点击页头左侧图片时改变
       1.切换logo
       2.切换宽度
       3.icon图标改变
       4.改变:collapse属性的状态
       ```

    4. 在data中提前声明一个用来存放用户信息的数据，封装获取用户信息的接口，在__mounted生命周期函数__中调用接口，并改变data中数据，实现数据渲染。

  - 遇到的问题

    + **坑1**

      + 监听路由确实会实现菜单的高亮，但是当点击内容管理的子编辑页面时，父级不会高亮。

      + **解决：**使用最简单的判断路径方式解决

        

- **3-3: 内容管理模块**

  + 项目话述:

    1. 使用element-ui的Card卡片和表单,table表格组件布局结构。
    2. 在data中提前声明一个用来存放文章列表的数据，和查询配置数据，封装获取文章列表接口，在__mounted生命周期函数__中调用接口，并改变data中数据，实现数据渲染。
    3. 插入分页器<el-pagination>,通过__:total__获取总页数,__@current-change__事件监听分页每次切换分页改变页数从而重新获取数据，__:current-page__绑定的当前页数。
    4. 表单组件绑定配置数据，查询时配置传给文章列表接口，返回数据传给data中的数据
    5. 封装删除接口，传id删除，成功后调用获取列表接口

    

  + 遇到的问题

    + **坑1**
      + <el-option>中的：value绑定的是id,：label绑定的是name
    + **坑2**
      + 获取到的文章数据中的数据时默认是使用JSON.parse()转换为json，JSON.parse处理data中id数值有上限问题。
        + **解决：**在__axios.create__自定义实例中使用json-bigint中的jsonbig.parse处理，可以将超出数值的转为大数

- **3-4: 素材管理模块**

  + 项目话述:

    1. 使用element-ui的Card卡片和Layout 布局结构。

    2. 在data中准备接口所需要的配置项，封装获取素材管理列表接口，返回的数据存入data数据中并在<el-row>中迭代。

    3. 处理分页，和内容管理模块一样

    4. 封装收藏接口，通过点击直接将整个数据对象传给函数，这样改变的数据是__响应式__的，取反实现收藏功能，每次点击将取反结果和id传入接口。

    5. 全部和收藏之间切换时重新调用接口。

    6. 使用__vue-cropper插件__在图片上传前处理图片

       ```js
       vue-cropper的使用
       1.在data中添加配置项，并配置
       2.在视图中添加<vueCropper>标签
       3.在组件中注册
       4.设置裁剪区的大小
       5.添加@realTime事件，设置预览区的模板
       ```

       

    7. 通过<el-upload>上传图片,__action__为上传路径,__name__为参数名

  + 遇到的问题

- **3-5: 发布文章模块**

  + 项目话述:
    1. 使用element-ui的Card卡片和表单布局结构。
    2. 封装__wangEditor__富文本组件，通过父子通信实现文本的数据的同步。
    3. 封装显示素材图片组件，如果不封装的话页面的代码量过多，在data中设置素材图片数据列表，迭代到视图，点击图片时，遍历图片数据，把所有的图片状态改为未选中，将当前的图片改为选中并将信息存入data，点确定取出图片路径通过**$emit**传给父组件，父组件通过**.sync**修饰符，接收图片路径。
    4. 通过判断type并遍历出多个独立的素材图片组件，根据type的值而变化
    5. 进行表单验证
    6. 把布尔值传入函数，根据布尔值进行不同的发布。
  + 遇到的问题

- **3-5: 评论管理模块**

  + 项目话述：
    1. 基于element-ui的table组件布局。
    2. 封装并评论接口，放在__mounted生命周期函数__中调用，并和data数据关联，渲染页面
    3. 封装一个处理布尔值的函数，使用__solt插槽__，调用函数，内部使用对象11对应关系去处理。
    4. 处理分页，和内容管理模块一样
    5. 将当前评论信息通过对象形式的实参传给评论状态处理函数，此时id是个大数，转为字符串，状态取反，传入id调用接口。